"use strict";(self.webpackChunkxtreme_admin_angular=self.webpackChunkxtreme_admin_angular||[]).push([[875],{9875:(k,u,s)=>{s.r(u),s.d(u,{AdminModule:()=>x});var l=s(6019),d=s(9010),f=s(7745),h=s(7378),m=s(2501),e=s(9619),p=s(5931),g=s(1659),c=s.n(g),_=s(388);function v(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).unblockClicked(o)}),e._uU(1,"D\xe9bloquer"),e.qZA()}}function T(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).blockClicked(o)}),e._uU(1,"Bloquer"),e.qZA()}}function b(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"p",6),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"p",6),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"p",6),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).editFormClicked(a)}),e._uU(13,"Modifier"),e.qZA(),e.YNc(14,v,2,0,"div",9),e.YNc(15,T,2,0,"div",9),e.TgZ(16,"div",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).deleteClicked(a)}),e._uU(17,"Supprimer"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(3),e.Oqu(t.user_id),e.xp6(3),e.Oqu(t.username),e.xp6(3),e.Oqu(t.email),e.xp6(5),e.Q6J("ngIf",t.blocked),e.xp6(1),e.Q6J("ngIf",!t.blocked)}}function A(i,n){if(1&i&&(e.TgZ(0,"table",3),e.TgZ(1,"thead"),e.TgZ(2,"tr"),e.TgZ(3,"th",4),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",4),e._uU(6,"Nom"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th",4),e._uU(10,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"tbody"),e.YNc(12,b,18,5,"tr",5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("dtOptions",t.dtOptions),e.xp6(12),e.Q6J("ngForOf",t.users)}}function Z(i,n){1&i&&(e.TgZ(0,"div",11),e._uU(1,"Il n'y a pas d'utilisateurs"),e.qZA())}let C=(()=>{class i{constructor(t,r){this.userService=t,this.notificationService=r,this.users=[],this.dtOptions={}}editFormClicked(t){c().fire({title:"Modification de mail",input:"email",inputValue:t.email,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Enregistrer",showLoaderOnConfirm:!0,preConfirm:r=>{const o=JSON.parse(JSON.stringify(t));o.email=r,this.userService.changeEmail(o).then(a=>{this.updateUsers(),c().hideLoading(),c().fire({icon:"success",title:"Mail modifi\xe9"})}).catch(a=>{c().showValidationMessage("Erreur : "+a.error)})},allowOutsideClick:()=>!c().isLoading()})}updateUsers(){this.userService.getAll().then(t=>(console.log(t),this.users=t))}deleteClicked(t){this.userService.delete(t).then(()=>{this.notificationService.showSuccess("Utilisateur supprim\xe9",""),this.updateUsers()}).catch(r=>{this.notificationService.showError(r.error,"Erreur rencontr\xe9e")})}activateClicked(t){this.userService.activate(t).then(()=>{this.notificationService.showSuccess("Utilisateur activ\xe9",""),this.updateUsers()}).catch(r=>{this.notificationService.showError(r.error,"Erreur rencontr\xe9e")})}deactivateClicked(t){this.userService.deactivate(t).then(()=>{this.notificationService.showSuccess("Utilisateur d\xe9sactiv\xe9",""),this.updateUsers()}).catch(r=>{c().showValidationMessage("Erreur : "+r.error)})}blockClicked(t){c().fire({title:"Blocage de compte",input:"text",inputPlaceholder:"Raison du blocage",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Enregistrer",showLoaderOnConfirm:!0,preConfirm:r=>{this.userService.block(t,r).then(()=>{this.updateUsers(),c().fire({icon:"success",title:"Utilisateur bloqu\xe9"})}).catch(o=>{this.notificationService.showError(o.error,"Erreur rencontr\xe9e")})},allowOutsideClick:()=>!c().isLoading()})}unblockClicked(t){this.userService.unblock(t).then(()=>{this.notificationService.showSuccess("Utilisateur d\xe9bloqu\xe9",""),this.updateUsers()}).catch(r=>{this.notificationService.showError(r.error,"Erreur rencontr\xe9e")})}ngOnInit(){this.dtOptions={language:{processing:"Traitement en cours...",search:"Rechercher&nbsp;:",lengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",info:"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",infoEmpty:"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",infoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",infoPostFix:"",loadingRecords:"Chargement en cours...",zeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",emptyTable:"Aucune donn\xe9e disponible dans le tableau",paginate:{first:"Premier",previous:"Pr&eacute;c&eacute;dent",next:"Suivant",last:"Dernier"},aria:{sortAscending:": activer pour trier la colonne par ordre croissant",sortDescending:": activer pour trier la colonne par ordre d\xe9croissant"}},pagingType:"full_numbers",pageLength:10,processing:!0}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f),e.Y36(_.g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users-table"]],inputs:{users:"users"},decls:4,vars:2,consts:[[1,"table-responsive"],["datatable","","class","table align-middle",3,"dtOptions",4,"ngIf","ngIfElse"],["noUsers",""],["datatable","",1,"table","align-middle",3,"dtOptions"],[1,"text-dark","font-medium","fs-4"],[4,"ngFor","ngForOf"],[1,"mb-0","fw-normal"],["role","group",1,"btn-group"],[1,"btn","btn-sm","btn-info",3,"click"],["class","btn btn-sm btn-info",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"w-100","text-center"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,A,13,2,"table",1),e.qZA(),e.YNc(2,Z,2,0,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",r.users.length>0)("ngIfElse",o)}},directives:[l.O5,m.G,l.sg],styles:[""]}),i})();const U=[{path:"",data:{title:"Admin dashboard",urls:[{title:"Admin dashboard",url:"/admin"},{title:"Admin dashboard"}]},component:(()=>{class i{constructor(t){this.userService=t,this.users=[],t.getAll().then(r=>this.users=r)}ngOnInit(){}getUsers(){return this.users}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin"]],decls:3,vars:1,consts:[[1,"row"],[1,"col"],[3,"users"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"app-users-table",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("users",r.getUsers()))},directives:[C],styles:[""]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.u5,d.UX,l.ez,f.Bz.forChild(U),h.X,m.T]]}),i})()}}]);